<!DOCTYPE html>
<html lang="en">
  <head>
    <title>EasyAccomo</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="shortcut icon"
      href="/images/logo_favicon/favicon-trungquandev.png"
    />
    <link
      rel="stylesheet"
      href="/bower_components/bootstrap/dist/css/bootstrap.css"
    />
    <link
      rel="stylesheet"
      href="/bower_components/font-awesome/css/font-awesome.css"
    />
    <link
      rel="stylesheet"
      href="/bower_components/AlertifyJS/build/css/alertify.css"
    />
    <link
      rel="stylesheet"
      href="/bower_components/emojionearea/dist/emojionearea.min.css"
    />
    <link
      rel="stylesheet"
      href="/bower_components/photoset-grid/css/colorbox.css"
    />

    <link rel="stylesheet" href="/css/style.css" />
  </head>
  <body onload="spinLoaded()">
    <!--Icon loader-->
    <div id="loader"></div>
    <%- include("alert/alert")%>

    <!-- include('navbar'); -->

    <%- include("navbar/navbar")%>
    <!-- content -->
    <div class="container-fluid">
      <div class="row content">
        <%- include("home/sections/leftSidenav")%>
        <div class="container" id="container">
          </div>  
    <div class="loading">
      <div class="ball"></div>
      <div class="ball"></div>
      <div class="ball"></div>
  </div>
<!--         
        <%-
        include("home/sections/rightSidenav")%> -->
      </div>
    </div>
    <!--Libraries-->
    <script src="/bower_components/jquery/dist/jquery.min.js"></script>
    <script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>
    <script src="/bower_components/jquery.nicescroll/jquery.nicescroll.min.js"></script>
    <script src="/bower_components/AlertifyJS/build/alertify.js"></script>
    <script src="/bower_components/moment/min/moment.min.js"></script>
    <script src="/bower_components/moment/min/moment-with-locales.min.js"></script>
    <script src="/bower_components/emojionearea/dist/emojionearea.min.js"></script>
    <script src="/bower_components/peerjs/peer.min.js"></script>
    <script src="/bower_components/sweetalert2/dist/sweetalert2.all.min.js"></script>
    <script src="/bower_components/photoset-grid/jquery.photoset-grid.min.js"></script>
    <script src="/bower_components/jquery-colorbox/jquery.colorbox-min.js"></script>
    <script>
      const container = document.getElementById('container');
  const loading = document.querySelector('.loading');
  
  getPost();
  getPost();
  getPost();
  getPost();
  window.addEventListener('scroll', () => {
    const { scrollTop, scrollHeight, clientHeight } = document.documentElement;
    
    console.log( { scrollTop, scrollHeight, clientHeight });
    
    if(clientHeight + scrollTop >= scrollHeight - 5) {
      // show the loading animation
      showLoading();
    }
  });
  
  function showLoading() {
    loading.classList.add('show');
    
    // load more data
    setTimeout(getPost, 1000)
  }
  
  async function getPost() {
    const postResponse = await fetch(`http://localhost:3000/user`);
    const postData = await postResponse.json();
    
    const userResponse = await fetch('https://randomuser.me/api');
    const userData = await userResponse.json();
    
    const data = { post: postData, user: userData.results[0] };
    
    addDataToDOM(data);
  }
  
  function getRandomNr() {
    return Math.floor(Math.random() * 100) + 1;
  }
  
  function addDataToDOM(data) {
    
    const postElement = document.createElement('div');
    postElement.classList.add('blog-post');
    postElement.innerHTML = `
      <h2 class="title">${data[0].username}</h2>
     
    `;
    container.appendChild(postElement);
    
    loading.classList.remove('show');
  }
  </script>
    <!-- My js-->
    <script src="/js/mainConfig.js"></script>
    <script src = "/js/findUserContact.js"></script>
    <%- include("contacts/contactsModal")%>
    <!-- include('- /navbar/navbar');
    include('/contacts/contactsModal'); include('/stream/streamModal');
    include('/images/imagesModal'); include('/attachs/attachsModal'); -->
    <div class="modal fade" id="user-profile-modal" role="dialog">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">
              &times;
            </button>
            <h4 class="modal-title">Tài khoản cá nhân</h4>
          </div>
          <div class="modal-body">
            <ul class="nav nav-tabs">
              <li class="active">
                <a data-toggle="tab" href="#seting-profile">Cài đặt chung</a>
              </li>
              <li>
                <a
                  data-toggle="tab"
                  id="link-to-password-profile"
                  href="#password-profile"
                  >Quản lý mật khẩu</a
                >
              </li>
            </ul>
            <div class="tab-content">
              <div id="seting-profile" class="tab-pane fade in active">
                <div class="row">
                  <form
                    class="form-horizontal"
                    method="post"
                    role="form"
                    action=""
                  >
                    <!-- left column -->
                    <div class="col-md-3">
                      <div class="text-center" id="div-update-avatar">
                        <div id="image-edit-profile">
                          <img
                            src="/images/users/<%= user.avatar%>"
                            class="avatar img-circle"
                            alt="avatar"
                          />
                        </div>
                        <h6>Tải lên một ảnh mới...</h6>
                        <input
                          type="file"
                          class="form-control"
                          id="input-change-avatar"
                          name="avatar"
                        /><br />
                        <div id="show-button-update-avatar"></div>
                      </div>
                    </div>
                    <!-- edit form column -->
                    <div class="col-md-9 personal-info">
                      <div class="alert alert-danger alert-dismissable">
                        <a class="panel-close close" data-dismiss="alert">×</a>
                        Update user error example.<br />
                        <!-- <script>openProfileModal();</script> -->
                      </div>
  
                      <div class="alert alert-success alert-dismissable">
                        <a class="panel-close close" data-dismiss="alert">×</a>
                        Update user success example.<br />
                        <!-- <script>openProfileModal();</script> -->
                      </div>
  
                      <h3>Local account.</h3>
                      <h3>Facebook account.</h3>
                      <h3>Google account.</h3>
  
                      <br />
                      <div class="form-group">
                        <label class="col-lg-3 control-label">Email:</label>
                        <div class="col-lg-8">
                          <div class="form-control" disabled>
                            trungquandev@trungquandev.com
                          </div>
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="col-md-3 control-label">Username:</label>
                        <div class="col-md-8">
                          <input
                            class="form-control"
                            type="text"
                            name="username"
                            value="Trung Quân"
                          />
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="col-lg-3 control-label">Giới tính:</label>
                        <div class="col-lg-8">
                          <label class="radio-inline col-lg-2"
                            >Nam
                            <input
                              type="radio"
                              name="gender"
                              value="male"
                              checked
                              required
                            />
                            <span class="checkmark"></span>
                          </label>
                          <label class="radio-inline col-lg-2"
                            >Nữ
                            <input
                              type="radio"
                              name="gender"
                              value="female"
                              required
                            />
                            <span class="checkmark"></span>
                          </label>
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="col-lg-3 control-label">Địa chỉ:</label>
                        <div class="col-lg-8">
                          <input
                            class="form-control"
                            type="text"
                            name="address"
                            value="Hà Nội, Việt Nam"
                          />
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="col-lg-3 control-label"
                          >Số điện thoại:</label
                        >
                        <div class="col-lg-8">
                          <input
                            class="form-control"
                            type="text"
                            name="phone"
                            value="0123456789"
                          />
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="col-md-3 control-label"></label>
                        <div class="col-md-8">
                          <input
                            type="submit"
                            class="btn btn-primary custom-background-btn-primary"
                            name="submit"
                            value="Lưu lại"
                          />
                          <span></span>
                          <input
                            type="reset"
                            class="btn btn-default custom-background-btn-reset"
                            value="Hủy bỏ"
                          />
                        </div>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
              <div id="password-profile" class="tab-pane fade">
                <div class="col-md-9 personal-info">
                  <div class="alert alert-danger alert-dismissable">
                    <a class="panel-close close" data-dismiss="alert">×</a>
                    Update password error example<br />
                    <!-- <script>openProfilePasswordModal();</script> -->
                  </div>
  
                  <div class="alert alert-success alert-dismissable">
                    <a class="panel-close close" data-dismiss="alert">×</a>
                    Update password success example<br />
                    <!-- <script>openProfilePasswordModal();</script> -->
                  </div>
  
                  <h3>Thay đổi mật khẩu</h3>
                  <br />
                  <form
                    class="form-horizontal"
                    method="post"
                    role="form"
                    action=""
                  >
                    <div class="form-group">
                      <label class="col-md-4 control-label">Mật khẩu cũ</label>
                      <div class="col-md-8">
                        <input
                          class="form-control"
                          type="password"
                          name="current_password"
                          placeholder="Enter your curent password..."
                        />
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-md-4 control-label">Mật khẩu mới</label>
                      <div class="col-md-8">
                        <input
                          class="form-control"
                          type="password"
                          name="new_password"
                          placeholder="Enter new password..."
                        />
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-md-4 control-label"
                        >Nhập lại mật khẩu mới</label
                      >
                      <div class="col-md-8">
                        <input
                          class="form-control"
                          type="password"
                          name="confirm_new_password"
                          placeholder="Enter confirm new password..."
                        />
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-md-4 control-label"></label>
                      <div class="col-md-8">
                        <input
                          type="submit"
                          class="btn btn-primary custom-background-btn-primary"
                          value="Lưu lại"
                        />
                        <span></span>
                        <input
                          type="reset"
                          class="btn btn-default custom-background-btn-reset"
                          value="Hủy bỏ"
                        />
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  
    <!-- include('../users/profileModal'); -->
    
    <!-- include('../groupChat/groupChatModal'); -->
    <div class="modal fade" id="groupChatModal" role="dialog">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">
              &times;
            </button>
            <h4 class="modal-title">Tạo một nhóm trò chuyện mới.</h4>
          </div>
          <div class="modal-body">
            <div class="col-md-5 col-sm-12 find-user-add-to-group">
              <div class="row form-search-to-add">
                <div class="form-group">
                  <input
                    type="text"
                    class="form-control"
                    id="btn-search-friend-to-add-group-chat"
                    placeholder="Nhập E-mail hoặc username của bạn bè..."
                  />
                  <span class="input-group-btn">
                    <button class="btn btn-lg" type="button">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div>
              </div>
              <div class="row result-searched">
                <ul id="group-chat-friends">
                  <div data-uid="test-uid-01">
                    <li data-uid="test-uid-01">
                      <div class="contactPanel">
                        <div class="user-avatar">
                          <img src="/images/users/avatar-default.jpg" alt="" />
                        </div>
                        <div class="user-name">
                          <p>Trung Quân</p>
                        </div>
                        <br />
                        <div class="user-address">
                          <span>&nbsp Hà Nội, Việt Nam</span>
                        </div>
                        <div class="add-user" data-uid="test-uid-01">
                          Thêm vào nhóm
                        </div>
                      </div>
                    </li>
                  </div>
                  <div data-uid="test-uid-02">
                    <li data-uid="test-uid-02">
                      <div class="contactPanel">
                        <div class="user-avatar">
                          <img
                            src="/images/users/default-avatar-trungquandev-02.jpg"
                            alt=""
                          />
                        </div>
                        <div class="user-name">
                          <p>Trung Quân</p>
                        </div>
                        <br />
                        <div class="user-address">
                          <span>&nbsp Hà Nội, Việt Nam</span>
                        </div>
                        <div class="add-user" data-uid="test-uid-02">
                          Thêm vào nhóm
                        </div>
                      </div>
                    </li>
                  </div>
                </ul>
              </div>
            </div>
            <div class="col-md-5 col-sm-12 list-user-added">
              <ul id="friends-added"></ul>
              <div class="text-center" id="action-create-name-chat">
                <input
                  type="text"
                  class="form-control"
                  id="name-group-chat"
                  placeholder="Nhập tên nhóm trò chuyện..."
                />
                <br />
                <button
                  type="button"
                  class="btn btn-primary"
                  id="create-group-chat"
                >
                  Tạo
                </button>
                <button
                  type="button"
                  class="btn btn-danger"
                  id="cancel-group-chat"
                >
                  Hủy
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
